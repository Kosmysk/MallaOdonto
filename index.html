<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ü§çü¶∑ Odonto UNAB üêÅü§ç</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Poppins", sans-serif;
      background: linear-gradient(180deg, #fff0f6, #f2f5ff);
      min-height: 100vh;
      padding: 20px;
      color: #2d3748;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      margin-bottom: 40px;
      animation: fadeInDown 0.6s ease;
    }

    h1 {
      color: #d63384;
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 10px;
      text-shadow: 0 4px 20px rgba(214, 51, 132, 0.2);
    }

    .subtitle {
      color: #d63384;
      font-size: 1.1rem;
      font-weight: 400;
    }

    .stats {
      display: flex;
      gap: 20px;
      justify-content: center;
      margin: 30px 0;
      flex-wrap: wrap;
    }

    .stat-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 20px 35px;
      box-shadow: 0 8px 32px rgba(214, 51, 132, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.3);
      transition: transform 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-5px);
    }

    .stat-number {
      font-size: 2.5rem;
      font-weight: 700;
      color: #d63384;
    }

    .stat-label {
      font-size: 0.9rem;
      color: #718096;
      margin-top: 5px;
    }

    .controls {
      text-align: center;
      margin-bottom: 30px;
    }

    .btn {
      background: rgba(255, 255, 255, 0.95);
      color: #d63384;
      border: none;
      padding: 12px 30px;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(214, 51, 132, 0.15);
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(214, 51, 132, 0.25);
      background: #ffffff;
    }

    #malla {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
      animation: fadeIn 0.8s ease;
    }

    .semestre {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 24px;
      padding: 25px;
      box-shadow: 0 10px 40px rgba(214, 51, 132, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.3);
      transition: transform 0.3s ease;
    }

    .semestre:hover {
      transform: translateY(-5px);
    }

    .semestre h2 {
      text-align: center;
      font-size: 1.2rem;
      margin-bottom: 20px;
      color: #d63384;
      font-weight: 700;
      padding-bottom: 15px;
      border-bottom: 3px solid #f4a9c7;
    }

    .ramo {
      background: #f7fafc;
      border-radius: 14px;
      padding: 14px 16px;
      margin-bottom: 12px;
      font-size: 0.9rem;
      cursor: not-allowed;
      transition: all 0.3s ease;
      border-left: 5px solid #cbd5e0;
      position: relative;
      overflow: hidden;
      line-height: 1.4;
    }

    .ramo::before {
      content: "";
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 5px;
      transition: width 0.3s ease;
    }

    .ramo.bloqueado {
      opacity: 0.6;
    }

    .ramo.activo {
      background: linear-gradient(135deg, #fef5fb 0%, #fef1f9 100%);
      border-left-color: #ff6fae;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(255, 111, 174, 0.15);
    }

    .ramo.activo::before {
      background: #ff6fae;
    }

    .ramo.activo:hover {
      transform: translateX(5px);
      box-shadow: 0 4px 15px rgba(255, 111, 174, 0.3);
    }

    .ramo.aprobado {
      background: linear-gradient(135d, #ffdbe9 0%, #ffc1d6 100%);
      border-left-color: #ff4d6d;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(255, 77, 109, 0.2);
    }

    .ramo.aprobado::before {
      background: #ff4d6d;
    }

    .ramo.aprobado:hover {
      transform: translateX(5px);
      box-shadow: 0 4px 15px rgba(255, 77, 109, 0.35);
    }

    .icon {
      display: inline-block;
      margin-right: 8px;
      font-size: 1.1rem;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @media (max-width: 768px) {
      h1 {
        font-size: 2rem;
      }

      .subtitle {
        font-size: 0.95rem;
      }

      #malla {
        grid-template-columns: 1fr;
      }

      .stat-card {
        padding: 15px 25px;
      }

      .stat-number {
        font-size: 2rem;
      }
    }

    .progress-bar-container {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 25px;
      margin: 20px auto;
      max-width: 600px;
      box-shadow: 0 8px 32px rgba(214, 51, 132, 0.1);
    }

    .progress-bar {
      width: 100%;
      height: 30px;
      background: #e2e8f0;
      border-radius: 15px;
      overflow: hidden;
      position: relative;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #d63384 0%, #ff6fae 100%);
      transition: width 0.5s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 600;
      font-size: 0.85rem;
    }
  </style>
</head>
<body>

<div class="container">
  <header>
    <h1>ü§çü¶∑ Odonto UNAB üêÅü§ç</h1>
  </header>

  <div class="progress-bar-container">
    <div class="progress-bar">
      <div class="progress-fill" id="progressBar">0%</div>
    </div>
  </div>

  <div class="stats">
    <div class="stat-card">
      <div class="stat-number" id="aprobadas">0</div>
      <div class="stat-label">Aprobadas</div>
    </div>
    <div class="stat-card">
      <div class="stat-number" id="disponibles">0</div>
      <div class="stat-label">Disponibles</div>
    </div>
    <div class="stat-card">
      <div class="stat-number" id="bloqueadas">0</div>
      <div class="stat-label">Bloqueadas</div>
    </div>
  </div>

  <div class="controls">
    <button class="btn" onclick="resetearTodo()">üîÑ Reiniciar Todo</button>
  </div>

  <div id="malla"></div>
</div>

<script>
const ramos = [
  // SEMESTRE 1
  { nombre: "Bases morfol√≥gicas y estructurales I", semestre: "Semestre 1", prereq: [] },
  { nombre: "Biolog√≠a Celular", semestre: "Semestre 1", prereq: [] },
  { nombre: "F√≠sica aplicada a la Odontolog√≠a", semestre: "Semestre 1", prereq: [] },
  { nombre: "Introducci√≥n a la Odontolog√≠a I", semestre: "Semestre 1", prereq: [] },
  { nombre: "Habilidades Comunicativas", semestre: "Semestre 1", prereq: [] },
  { nombre: "Ingl√©s I", semestre: "Semestre 1", prereq: [] },

  // SEMESTRE 2
  { nombre: "Bases morfol√≥gicas y estructurales II", semestre: "Semestre 2", prereq: ["Bases morfol√≥gicas y estructurales I"] },
  { nombre: "Gen√©tica Molecular Humana", semestre: "Semestre 2", prereq: ["Biolog√≠a Celular"] },
  { nombre: "Qu√≠mica General e Inorg√°nica", semestre: "Semestre 2", prereq: ["F√≠sica aplicada a la Odontolog√≠a"] },
  { nombre: "Introducci√≥n a la Odontolog√≠a II", semestre: "Semestre 2", prereq: ["Introducci√≥n a la Odontolog√≠a I"] },
  { nombre: "Ingl√©s II", semestre: "Semestre 2", prereq: ["Ingl√©s I"] },

  // SEMESTRE 3
  { nombre: "Biomateriales Dentales", semestre: "Semestre 3", prereq: [
    "Bases morfol√≥gicas y estructurales II",
    "Qu√≠mica General e Inorg√°nica",
    "Introducci√≥n a la Odontolog√≠a II"
  ]},
  { nombre: "Fisiolog√≠a", semestre: "Semestre 3", prereq: ["Bases morfol√≥gicas y estructurales II"] },
  { nombre: "Bioqu√≠mica General", semestre: "Semestre 3", prereq: ["Biolog√≠a Celular", "Qu√≠mica General e Inorg√°nica"] },
  { nombre: "Microbiolog√≠a Oral", semestre: "Semestre 3", prereq: ["Gen√©tica Molecular Humana"] },
  { nombre: "Patolog√≠a General I", semestre: "Semestre 3", prereq: [
    "Bases morfol√≥gicas y estructurales II",
    "Gen√©tica Molecular Humana"
  ]},
  { nombre: "Ingl√©s III", semestre: "Semestre 3", prereq: ["Ingl√©s II"] },

  // SEMESTRE 4
  { nombre: "Bioqu√≠mica Oral", semestre: "Semestre 4", prereq: ["Bioqu√≠mica General"] },
  { nombre: "Patolog√≠a General II", semestre: "Semestre 4", prereq: ["Fisiolog√≠a", "Patolog√≠a General I"] },
  { nombre: "Promoci√≥n y Educaci√≥n en Salud", semestre: "Semestre 4", prereq: ["Introducci√≥n a la Odontolog√≠a II"] },
  { nombre: "Farmacolog√≠a", semestre: "Semestre 4", prereq: ["Fisiolog√≠a", "Microbiolog√≠a Oral"] },
  { nombre: "Ingl√©s IV", semestre: "Semestre 4", prereq: ["Ingl√©s III"] },

  // SEMESTRE 5
  { nombre: "Patolog√≠a Dentomaxilofacial", semestre: "Semestre 5", prereq: ["Patolog√≠a General II", "Farmacolog√≠a"] },
  { nombre: "Imagenolog√≠a Dentomaxilar", semestre: "Semestre 5", prereq: ["Patolog√≠a General II"] },
  { nombre: "Cirug√≠a Bucal B√°sica", semestre: "Semestre 5", prereq: ["Patolog√≠a General II", "Farmacolog√≠a"] },
  { nombre: "Fisiolog√≠a Oral y Oclusi√≥n", semestre: "Semestre 5", prereq: ["Biomateriales Dentales"] },
  { nombre: "Integrador I: Precl√≠nico Integrado", semestre: "Semestre 5", prereq: [
    "Biomateriales Dentales",
    "Promoci√≥n y Educaci√≥n en Salud"
  ]},

  // SEMESTRE 6
  { nombre: "Cariolog√≠a Cl√≠nica", semestre: "Semestre 6", prereq: [
    "Bioqu√≠mica Oral",
    "Patolog√≠a General II",
    "Promoci√≥n y Educaci√≥n en Salud"
  ]},

  // SEMESTRE 7
  { nombre: "Rehabilitaci√≥n Oral", semestre: "Semestre 7", prereq: [
    "Fisiolog√≠a Oral y Oclusi√≥n",
    "Cariolog√≠a Cl√≠nica",
    "Integrador I: Precl√≠nico Integrado"
  ]},
  { nombre: "Cirug√≠a Dentomaxilar", semestre: "Semestre 7", prereq: [
    "Patolog√≠a Dentomaxilofacial",
    "Imagenolog√≠a Dentomaxilar",
    "Cirug√≠a Bucal B√°sica"
  ]},
  { nombre: "Endodoncia", semestre: "Semestre 7", prereq: [
    "Imagenolog√≠a Dentomaxilar",
    "Cirug√≠a Bucal B√°sica"
  ]},
  { nombre: "Periodoncia", semestre: "Semestre 7", prereq: [
    "Imagenolog√≠a Dentomaxilar",
    "Cirug√≠a Bucal B√°sica",
    "Integrador I: Precl√≠nico Integrado"
  ]},
  { nombre: "√âtica y Psicolog√≠a orientada a la Pr√°ctica Cl√≠nica", semestre: "Semestre 7", prereq: ["Promoci√≥n y Educaci√≥n en Salud"] },

  // SEMESTRE 8
  { nombre: "Salud P√∫blica Odontol√≥gica", semestre: "Semestre 8", prereq: ["Cariolog√≠a Cl√≠nica"] },
  { nombre: "Medicina Oral", semestre: "Semestre 8", prereq: ["Patolog√≠a Dentomaxilofacial"] },

  // SEMESTRE 9
  { nombre: "Cirug√≠a y Traumatolog√≠a Maxilofacial", semestre: "Semestre 9", prereq: [
    "Cirug√≠a Dentomaxilar",
    "Medicina Oral"
  ]},
  { nombre: "Ortodoncia y Ortopedia Dentomaxilar", semestre: "Semestre 9", prereq: [
    "Periodoncia",
    "√âtica y Psicolog√≠a orientada a la Pr√°ctica Cl√≠nica"
  ]},
  { nombre: "Odontopediatr√≠a", semestre: "Semestre 9", prereq: [
    "Rehabilitaci√≥n Oral",
    "Cirug√≠a Dentomaxilar",
    "Endodoncia",
    "Periodoncia"
  ]},
  { nombre: "INTEGRADOR II: Cl√≠nica Integral del Adulto y Odontogeriatr√≠a", semestre: "Semestre 9", prereq: [
    "√âtica y Psicolog√≠a orientada a la Pr√°ctica Cl√≠nica",
    "Rehabilitaci√≥n Oral",
    "Endodoncia",
    "Periodoncia"
  ]},
  { nombre: "Pensamiento Cr√≠tico", semestre: "Semestre 9", prereq: ["Habilidades Comunicativas"] },

  // SEMESTRE 10
  { nombre: "Odontolog√≠a basada en la evidencia", semestre: "Semestre 10", prereq: ["Salud P√∫blica Odontol√≥gica"] },
  { nombre: "Administraci√≥n y gesti√≥n en Odontolog√≠a", semestre: "Semestre 10", prereq: ["Salud P√∫blica Odontol√≥gica"] },

  // SEMESTRE 11
  { nombre: "Proyecto de Investigaci√≥n", semestre: "Semestre 11", prereq: [
    "Pensamiento Cr√≠tico",
    "Cirug√≠a y Traumatolog√≠a Maxilofacial",
    "Ortodoncia y Ortopedia Dentomaxilar",
    "Odontopediatr√≠a",
    "Odontolog√≠a basada en la evidencia",
    "Administraci√≥n y gesti√≥n en Odontolog√≠a",
    "INTEGRADOR II: Cl√≠nica Integral del Adulto y Odontogeriatr√≠a"
  ]},
  { nombre: "INTEGRADOR III: Internado Cl√≠nico", semestre: "Semestre 11", prereq: [
    "Pensamiento Cr√≠tico",
    "Cirug√≠a y Traumatolog√≠a Maxilofacial",
    "Ortodoncia y Ortopedia Dentomaxilar",
    "Odontopediatr√≠a",
    "Odontolog√≠a basada en la evidencia",
    "Administraci√≥n y gesti√≥n en Odontolog√≠a",
    "INTEGRADOR II: Cl√≠nica Integral del Adulto y Odontogeriatr√≠a"
  ]}
];

const contenedor = document.getElementById("malla");
let aprobados = [];

// Intentar cargar desde localStorage, pero manejar errores
try {
  const stored = localStorage.getItem("aprobados");
  if (stored) {
    aprobados = JSON.parse(stored);
  }
} catch (e) {
  console.error("Error al cargar datos:", e);
  aprobados = [];
}

function puedeActivarse(ramo) {
  return ramo.prereq.every(r => aprobados.includes(r));
}

function actualizarEstadisticas() {
  const aprobadas = aprobados.length;
  const disponibles = ramos.filter(r => !aprobados.includes(r.nombre) && puedeActivarse(r)).length;
  const bloqueadas = ramos.filter(r => !aprobados.includes(r.nombre) && !puedeActivarse(r)).length;
  const porcentaje = Math.round((aprobadas / ramos.length) * 100);

  document.getElementById("aprobadas").textContent = aprobadas;
  document.getElementById("disponibles").textContent = disponibles;
  document.getElementById("bloqueadas").textContent = bloqueadas;
  document.getElementById("progressBar").style.width = porcentaje + "%";
  document.getElementById("progressBar").textContent = porcentaje + "%";
}

function toggleRamo(ramo) {
  const index = aprobados.indexOf(ramo.nombre);
  
  if (index > -1) {
    // Desmarcar: verificar si otros ramos dependen de este
    const dependientes = ramos.filter(r => 
      r.prereq.includes(ramo.nombre) && aprobados.includes(r.nombre)
    );
    
    if (dependientes.length > 0) {
      const confirmacion = confirm(
        `‚ö†Ô∏è Al desmarcar "${ramo.nombre}", tambi√©n se desmarcar√°n las siguientes asignaturas que dependen de ella:\n\n` +
        dependientes.map(r => `‚Ä¢ ${r.nombre}`).join('\n') +
        `\n\n¬øDeseas continuar?`
      );
      
      if (!confirmacion) return;
      
      // Desmarcar esta y todas las dependientes
      aprobados.splice(index, 1);
      dependientes.forEach(dep => {
        const depIndex = aprobados.indexOf(dep.nombre);
        if (depIndex > -1) {
          aprobados.splice(depIndex, 1);
        }
      });
    } else {
      // No hay dependientes, desmarcar directamente
      aprobados.splice(index, 1);
    }
  } else if (puedeActivarse(ramo)) {
    // Marcar como aprobado
    aprobados.push(ramo.nombre);
  }
  
  localStorage.setItem("aprobados", JSON.stringify(aprobados));
  render();
}

function resetearTodo() {
  if (confirm("¬øEst√°s seguro de que quieres reiniciar todo el progreso?")) {
    aprobados = [];
    localStorage.setItem("aprobados", JSON.stringify(aprobados));
    render();
  }
}

function render() {
  contenedor.innerHTML = "";
  const semestres = [...new Set(ramos.map(r => r.semestre))];

  semestres.forEach(sem => {
    const div = document.createElement("div");
    div.className = "semestre";
    div.innerHTML = `<h2>${sem}</h2>`;

    ramos.filter(r => r.semestre === sem).forEach(ramo => {
      const r = document.createElement("div");
      r.className = "ramo";

      let icon = "üîí";
      if (aprobados.includes(ramo.nombre)) {
        r.classList.add("aprobado");
        icon = "üíñ‚úÖ";
      } else if (puedeActivarse(ramo)) {
        r.classList.add("activo");
        icon = "ü¶∑‚ú®";
      } else {
        r.classList.add("bloqueado");
      }

      r.innerHTML = `<span class="icon">${icon}</span>${ramo.nombre}`;

      r.onclick = () => toggleRamo(ramo);

      div.appendChild(r);
    });

    contenedor.appendChild(div);
  });

  actualizarEstadisticas();
}

render();
</script>

</body>
</html>
